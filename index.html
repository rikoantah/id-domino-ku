<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>ID KU'</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg1:#020617;
  --bg2:#0f172a;
  --card:#1f2937;
  --used:#064e3b;
  --text:#e5e7eb;
  --accent:#22c55e;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  color:var(--text);
}

header{
  text-align:center;
  padding:18px 12px;
  font-size:22px;
  font-weight:700;
  letter-spacing:1px;
}

#list{
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:12px;
}

/* ===== ITEM VERTIKAL ===== */
.item{
  background:var(--card);
  padding:20px 14px;
  border-radius:18px;
  font-size:18px;
  font-weight:600;
  text-align:center;
  cursor:pointer;
  position:relative;
  transition:0.15s;
  box-shadow:0 6px 14px rgba(0,0,0,0.35);
}

.item:active{
  transform:scale(0.97);
}

.item.used{
  background:var(--used);
  color:#bbf7d0;
}

.item.used::after{
  content:"âœ“";
  position:absolute;
  top:10px;
  right:14px;
  font-size:16px;
  color:var(--accent);
}
</style>
</head>

<body>

<header>ID KU'</header>
<div id="list"></div>

<script>
/* =====================
   KONFIGURASI
===================== */
const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vTRXU-DQApb_fHnXcXOAIz7ZyQtEpB7G2TXSpee_XqX5zIbj4URA8ckDV4jG49aHT9EJsB1sfNHAgqW/pub?output=csv";

const STORAGE_KEY = "id_ku_used";
const RESET_KEY = "id_ku_reset";

/* =====================
   RESET JAM 00:00
===================== */
function today(){
  return new Date().toISOString().slice(0,10);
}

if(localStorage.getItem(RESET_KEY) !== today()){
  localStorage.setItem(RESET_KEY, today());
  localStorage.removeItem(STORAGE_KEY);
}

/* =====================
   LOAD STATUS
===================== */
let used = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");

/* =====================
   LOAD DATA CSV
===================== */
fetch(CSV_URL)
.then(r => r.text())
.then(csv => {
  const rows = csv.split("\n").slice(1); // skip header
  const list = document.getElementById("list");

  rows.forEach(row => {
    const cols = row.split(",");
    if(!cols[1]) return;

    const id = cols[1].trim();
    if(!id) return;

    const div = document.createElement("div");
    div.className = "item" + (used.includes(id) ? " used" : "");
    div.textContent = id;

    div.onclick = () => {
      navigator.clipboard.writeText(id);
      if(!used.includes(id)){
        used.push(id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(used));
        div.classList.add("used");
      }
    };

    list.appendChild(div);
  });
})
.catch(()=>{
  document.getElementById("list").innerHTML =
    "<div style='text-align:center;opacity:.6'>Gagal memuat data</div>";
});
</script>

</body>
</html>
